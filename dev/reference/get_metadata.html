<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Retrieve detailed metadata about an IPUMS data source — get_metadata • ipumsr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Retrieve detailed metadata about an IPUMS data source — get_metadata"><meta name="description" content='Retrieve metadata containing API codes and descriptions for an IPUMS data
source. See the IPUMS developer documentation
for details about the metadata provided for individual data collections
and API endpoints.
To retrieve a summary of all available data sources of a particular
type, use get_metadata_catalog(). This output can be used to identify the
names of data sources for which to request detailed metadata.
Currently, comprehensive metadata is only available for IPUMS NHGIS
and IPUMS IHGIS. See get_sample_info() to list basic sample information
for IPUMS microdata collections.
Learn more about the IPUMS API in vignette("ipums-api").'><meta property="og:description" content='Retrieve metadata containing API codes and descriptions for an IPUMS data
source. See the IPUMS developer documentation
for details about the metadata provided for individual data collections
and API endpoints.
To retrieve a summary of all available data sources of a particular
type, use get_metadata_catalog(). This output can be used to identify the
names of data sources for which to request detailed metadata.
Currently, comprehensive metadata is only available for IPUMS NHGIS
and IPUMS IHGIS. See get_sample_info() to list basic sample information
for IPUMS microdata collections.
Learn more about the IPUMS API in vignette("ipums-api").'><meta property="og:image" content="https://tech.popdata.org/ipumsr/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ipumsr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.8.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ipums.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>IPUMS data</h6></li>
    <li><a class="dropdown-item" href="../articles/ipums-read.html">Read IPUMS data</a></li>
    <li><a class="dropdown-item" href="../articles/value-labels.html">Value labels</a></li>
    <li><a class="dropdown-item" href="../articles/ipums-bigdata.html">Big IPUMS data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>IPUMS API</h6></li>
    <li><a class="dropdown-item" href="../articles/ipums-api.html">Introduction to the API</a></li>
    <li><a class="dropdown-item" href="../articles/ipums-api-micro.html">Microdata API requests</a></li>
    <li><a class="dropdown-item" href="../articles/ipums-api-agg.html">Aggregate data API requests</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="external-link dropdown-item" href="https://ipums.org/exercises.shtml">Project-specific exercises</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipums/ipumsr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://forum.ipums.org" aria-label="IPUMS User Forum"><span class="fa fa-users"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.ipums.org/" aria-label="IPUMS website"><span class="fa fa-globe"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Retrieve detailed metadata about an IPUMS data source</h1>
      <small class="dont-index">Source: <a href="https://github.com/ipums/ipumsr/blob/main/R/api_metadata.R" class="external-link"><code>R/api_metadata.R</code></a></small>
      <div class="d-none name"><code>get_metadata.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Retrieve metadata containing API codes and descriptions for an IPUMS data
source. See the <a href="https://developer.ipums.org/docs/v2/workflows/explore_metadata/" class="external-link">IPUMS developer documentation</a>
for details about the metadata provided for individual data collections
and API endpoints.</p>
<p>To retrieve a summary of all available data sources of a particular
type, use <code><a href="get_metadata_catalog.html">get_metadata_catalog()</a></code>. This output can be used to identify the
names of data sources for which to request detailed metadata.</p>
<p>Currently, comprehensive metadata is only available for IPUMS NHGIS
and IPUMS IHGIS. See <code><a href="get_sample_info.html">get_sample_info()</a></code> to list basic sample information
for IPUMS microdata collections.</p>
<p>Learn more about the IPUMS API in <code><a href="../articles/ipums-api.html">vignette("ipums-api")</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_metadata</span><span class="op">(</span></span>
<span>  <span class="va">collection</span>,</span>
<span>  dataset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_series_table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"IPUMS_API_KEY"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-collection">collection<a class="anchor" aria-label="anchor" href="#arg-collection"></a></dt>
<dd><p>Character string indicating the IPUMS collection for which
to retrieve metadata.</p></dd>


<dt id="arg-dataset">dataset<a class="anchor" aria-label="anchor" href="#arg-dataset"></a></dt>
<dd><p>Name of an individual dataset from an IPUMS aggregate data
collection for which to retrieve metadata.</p></dd>


<dt id="arg-data-table">data_table<a class="anchor" aria-label="anchor" href="#arg-data-table"></a></dt>
<dd><p>Name of an individual data table from an IPUMS aggregate
data collection for which to retrieve metadata. If provided and
<code>collection = "nhgis"</code>, an associated <code>dataset</code> must also be specified.</p></dd>


<dt id="arg-time-series-table">time_series_table<a class="anchor" aria-label="anchor" href="#arg-time-series-table"></a></dt>
<dd><p>If <code>collection = "nhgis"</code>, name of an individual
time series table from IPUMS NHGIS for which to retrieve metadata.</p></dd>


<dt id="arg-api-key">api_key<a class="anchor" aria-label="anchor" href="#arg-api-key"></a></dt>
<dd><p>API key associated with your user account. Defaults to the
value of the <code>IPUMS_API_KEY</code> environment variable. See
<code><a href="set_ipums_api_key.html">set_ipums_api_key()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list of metadata for the specified data source.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="get_metadata_catalog.html">get_metadata_catalog()</a></code> to obtain a summary of available data sources for
a given IPUMS data collection.</p>
<p><code><a href="define_extract_agg.html">define_extract_agg()</a></code> to create an IPUMS aggregate data extract
definition.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get detailed metadata for a single source with its associated argument:</span></span></span>
<span class="r-in"><span><span class="va">cs5_meta</span> <span class="op">&lt;-</span> <span class="fu">get_metadata</span><span class="op">(</span><span class="st">"nhgis"</span>, time_series_table <span class="op">=</span> <span class="st">"CS5"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cs5_meta</span><span class="op">$</span><span class="va">geog_levels</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use the available values when defining an NHGIS extract request</span></span></span>
<span class="r-in"><span><span class="fu"><a href="define_extract_agg.html">define_extract_agg</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"nhgis"</span>,</span></span>
<span class="r-in"><span>  time_series_tables <span class="op">=</span> <span class="fu"><a href="ds_spec.html">tst_spec</a></span><span class="op">(</span><span class="st">"CS5"</span>, geog_levels <span class="op">=</span> <span class="st">"state"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Detailed metadata is also provided for datasets and data tables</span></span></span>
<span class="r-in"><span><span class="fu">get_metadata</span><span class="op">(</span><span class="st">"nhgis"</span>, dataset <span class="op">=</span> <span class="st">"1990_STF1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_metadata</span><span class="op">(</span><span class="st">"nhgis"</span>, data_table <span class="op">=</span> <span class="st">"NP1"</span>, dataset <span class="op">=</span> <span class="st">"1990_STF1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_metadata</span><span class="op">(</span><span class="st">"ihgis"</span>, dataset <span class="op">=</span> <span class="st">"KZ2009pop"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Iterate over data sources to retrieve detailed metadata for several</span></span></span>
<span class="r-in"><span><span class="co"># records. For instance, to get variable metadata for a set of data tables:</span></span></span>
<span class="r-in"><span><span class="va">tables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NP1"</span>, <span class="st">"NP2"</span>, <span class="st">"NP10"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">var_meta</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">tables</span>,</span></span>
<span class="r-in"><span>  <span class="kw">function</span><span class="op">(</span><span class="va">dt</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">dt_meta</span> <span class="op">&lt;-</span> <span class="fu">get_metadata</span><span class="op">(</span><span class="st">"nhgis"</span>, dataset <span class="op">=</span> <span class="st">"1990_STF1"</span>, data_table <span class="op">=</span> <span class="va">dt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># This ensures you avoid hitting rate limit for large numbers of tables</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">dt_meta</span><span class="op">$</span><span class="va">variables</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.ipums.org" class="external-link">IPUMS</a> at the University of Minnesota.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

