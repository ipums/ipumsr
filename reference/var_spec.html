<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create variable and sample specifications for IPUMS microdata extract requests — var_spec • ipumsr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create variable and sample specifications for IPUMS microdata extract requests — var_spec"><meta name="description" content='Provide specifications for individual variables and time use variables when
defining an IPUMS microdata extract request.
Currently, no additional specifications are available for IPUMS samples.
Note that not all variable-level options are available across all IPUMS
data collections. For a summary of supported features by collection, see the
IPUMS API documentation.
Learn more about microdata extract definitions in
vignette("ipums-api-micro").'><meta property="og:description" content='Provide specifications for individual variables and time use variables when
defining an IPUMS microdata extract request.
Currently, no additional specifications are available for IPUMS samples.
Note that not all variable-level options are available across all IPUMS
data collections. For a summary of supported features by collection, see the
IPUMS API documentation.
Learn more about microdata extract definitions in
vignette("ipums-api-micro").'><meta property="og:image" content="https://tech.popdata.org/ipumsr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ipumsr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ipums.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>IPUMS data</h6></li>
    <li><a class="dropdown-item" href="../articles/ipums-read.html">Read IPUMS data</a></li>
    <li><a class="dropdown-item" href="../articles/value-labels.html">Value labels</a></li>
    <li><a class="dropdown-item" href="../articles/ipums-bigdata.html">Big IPUMS data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>IPUMS API</h6></li>
    <li><a class="dropdown-item" href="../articles/ipums-api.html">Introduction to the API</a></li>
    <li><a class="dropdown-item" href="../articles/ipums-api-micro.html">Microdata API requests</a></li>
    <li><a class="dropdown-item" href="../articles/ipums-api-agg.html">Aggregate data API requests</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="external-link dropdown-item" href="https://ipums.org/exercises.shtml">Project-specific exercises</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipums/ipumsr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://forum.ipums.org" aria-label="IPUMS User Forum"><span class="fa fa-users"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.ipums.org/" aria-label="IPUMS website"><span class="fa fa-globe"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create variable and sample specifications for IPUMS microdata extract requests</h1>
      <small class="dont-index">Source: <a href="https://github.com/ipums/ipumsr/blob/v0.9.0/R/api_define_extract.R" class="external-link"><code>R/api_define_extract.R</code></a></small>
      <div class="d-none name"><code>var_spec.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Provide specifications for individual variables and time use variables when
defining an IPUMS microdata extract request.</p>
<p>Currently, no additional specifications are available for IPUMS samples.</p>
<p>Note that not all variable-level options are available across all IPUMS
data collections. For a summary of supported features by collection, see the
<a href="https://developer.ipums.org/docs/v2/apiprogram/apis/microdata/" class="external-link">IPUMS API documentation</a>.</p>
<p>Learn more about microdata extract definitions in
<code><a href="../articles/ipums-api-micro.html">vignette("ipums-api-micro")</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">var_spec</span><span class="op">(</span></span>
<span>  <span class="va">name</span>,</span>
<span>  case_selections <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  case_selection_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  attached_characteristics <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_quality_flags <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adjust_monetary_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  preselected <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tu_var_spec</span><span class="op">(</span><span class="va">name</span>, owner <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">samp_spec</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Name of the sample, variable, or time use variable.</p></dd>


<dt id="arg-case-selections">case_selections<a class="anchor" aria-label="anchor" href="#arg-case-selections"></a></dt>
<dd><p>A character vector of values of the given variable
that should be used to select cases. Values should be specified exactly as
they appear in the "CODES" tab for the given variable in the web-based
extract builder, including zero-padding (e.g. see the "CODES" tab for IPUMS
CPS variable
<a href="https://cps.ipums.org/cps-action/variables/EDUC#codes_section" class="external-link">EDUC</a>).</p></dd>


<dt id="arg-case-selection-type">case_selection_type<a class="anchor" aria-label="anchor" href="#arg-case-selection-type"></a></dt>
<dd><p>One of <code>"general"</code> or <code>"detailed"</code> indicating
whether the values in <code>case_selections</code> should be matched against the
general or detailed codes for the given variable. Only some variables have
detailed codes. See IPUMS USA variable
<a href="https://usa.ipums.org/usa-action/variables/RACE#codes_section" class="external-link">RACE</a> for
an example of a variable with general and detailed codes.</p>
<p>Defaults to <code>"general"</code> if any <code>case_selections</code> are specified.</p></dd>


<dt id="arg-attached-characteristics">attached_characteristics<a class="anchor" aria-label="anchor" href="#arg-attached-characteristics"></a></dt>
<dd><p>Whose characteristics should be attached, if
any? Accepted values are <code>"mother"</code>, <code>"father"</code>, <code>"spouse"</code>, <code>"head"</code>,
or a combination. Specifying attached characteristics will add variables to
your extract that contain the values for the given variable for the
specified household members. For example, variable "AGE_MOM" will be added
if <code>"mother"</code> is specified for the variable <code>"AGE"</code>.</p>
<p>For data collections with information on same-sex couples, specifying
<code>"mother"</code> or <code>"father"</code> will attach the characteristics of both mothers or
both fathers for children with same-sex parents, by adding variables with
names of the form "AGE_MOM" and "AGE_MOM2".</p></dd>


<dt id="arg-data-quality-flags">data_quality_flags<a class="anchor" aria-label="anchor" href="#arg-data-quality-flags"></a></dt>
<dd><p>Logical indicating whether to include data quality
flags for the given variable. By default, data quality flags are not
included.</p></dd>


<dt id="arg-adjust-monetary-values">adjust_monetary_values<a class="anchor" aria-label="anchor" href="#arg-adjust-monetary-values"></a></dt>
<dd><p>Logical indicating whether to include the
variable's inflation-adjusted equivalent, if available.</p></dd>


<dt id="arg-preselected">preselected<a class="anchor" aria-label="anchor" href="#arg-preselected"></a></dt>
<dd><p>Logical indicating whether the variable is preselected.
This is not needed for external use.</p></dd>


<dt id="arg-owner">owner<a class="anchor" aria-label="anchor" href="#arg-owner"></a></dt>
<dd><p>For user-defined time use variables, the email of the user
account associated with the time use variable. Currently, only the email
of the user submitting the extract request is supported.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>var_spec</code>, <code>tu_var_spec</code>, or <code>samp_spec</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">var1</span> <span class="op">&lt;-</span> <span class="fu">var_spec</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"SCHOOL"</span>,</span></span>
<span class="r-in"><span>  case_selections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data_quality_flags <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">var2</span> <span class="op">&lt;-</span> <span class="fu">var_spec</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"RACE"</span>,</span></span>
<span class="r-in"><span>  case_selections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"140"</span>, <span class="st">"150"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  case_selection_type <span class="op">=</span> <span class="st">"detailed"</span>,</span></span>
<span class="r-in"><span>  attached_characteristics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mother"</span>, <span class="st">"spouse"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use variable specifications in a microdata extract definition:</span></span></span>
<span class="r-in"><span><span class="va">extract</span> <span class="op">&lt;-</span> <span class="fu"><a href="define_extract_micro.html">define_extract_micro</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  collection <span class="op">=</span> <span class="st">"usa"</span>,</span></span>
<span class="r-in"><span>  description <span class="op">=</span> <span class="st">"Example extract"</span>,</span></span>
<span class="r-in"><span>  samples <span class="op">=</span> <span class="st">"us2017b"</span>,</span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">var1</span>, <span class="va">var2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">extract</span><span class="op">$</span><span class="va">variables</span><span class="op">$</span><span class="va">SCHOOL</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "SCHOOL"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $case_selections</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1" "2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $data_quality_flags</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $case_selection_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "general"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "var_spec"   "ipums_spec" "list"      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">extract</span><span class="op">$</span><span class="va">variables</span><span class="op">$</span><span class="va">RACE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "RACE"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $case_selections</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "140" "150"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $attached_characteristics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "mother" "spouse"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $case_selection_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "detailed"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "var_spec"   "ipums_spec" "list"      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For IPUMS Time Use collections, use `tu_var_spec()` to include user-defined</span></span></span>
<span class="r-in"><span><span class="co"># time use variables</span></span></span>
<span class="r-in"><span><span class="va">my_time_use_variable</span> <span class="op">&lt;-</span> <span class="fu">tu_var_spec</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"MYTIMEUSEVAR"</span>,</span></span>
<span class="r-in"><span>  owner <span class="op">=</span> <span class="st">"example@example.com"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># IPUMS-defined time use variables can be included either as `tu_var_spec`</span></span></span>
<span class="r-in"><span><span class="co"># objects or with just the variable name:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="define_extract_micro.html">define_extract_micro</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  collection <span class="op">=</span> <span class="st">"atus"</span>,</span></span>
<span class="r-in"><span>  description <span class="op">=</span> <span class="st">"Requesting user- and IPUMS-defined time use variables"</span>,</span></span>
<span class="r-in"><span>  samples <span class="op">=</span> <span class="st">"at2007"</span>,</span></span>
<span class="r-in"><span>  time_use_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">my_time_use_variable</span>,</span></span>
<span class="r-in"><span>    <span class="fu">tu_var_spec</span><span class="op">(</span><span class="st">"ACT_PCARE"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"ACT_SOCIAL"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS ATUS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Requesting user- and IPUMS-defined time use variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Samples: </span>(1 total) at2007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Time Use Variables: </span>(3 total) MYTIMEUSEVAR, ACT_PCARE, ACT_SOCIAL</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.ipums.org" class="external-link">IPUMS</a> at the University of Minnesota.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

