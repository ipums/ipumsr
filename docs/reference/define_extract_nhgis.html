<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Define an IPUMS NHGIS extract request — define_extract_nhgis • ipumsr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Define an IPUMS NHGIS extract request — define_extract_nhgis"><meta property="og:description" content='Define the parameters of an IPUMS NHGIS extract request to be submitted via
the IPUMS API.
Use get_metadata_nhgis() to browse and identify data sources for use
in NHGIS extract definitions. For general information, see the NHGIS
data source overview and the
FAQ.
Learn more about the IPUMS API in vignette("ipums-api") and
NHGIS extract definitions in vignette("ipums-api-nhgis").'><meta property="og:image" content="http://tech.popdata.org/ipumsr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ipumsr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ipums.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">IPUMS Data</li>
    <li>
      <a href="../articles/ipums-read.html">Read IPUMS data</a>
    </li>
    <li>
      <a href="../articles/value-labels.html">Value labels</a>
    </li>
    <li>
      <a href="../articles/ipums-bigdata.html">Big IPUMS data</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">IPUMS API</li>
    <li>
      <a href="../articles/ipums-api.html">Introduction to the API</a>
    </li>
    <li>
      <a href="../articles/ipums-api-micro.html">Microdata API requests</a>
    </li>
    <li>
      <a href="../articles/ipums-api-nhgis.html">NHGIS API requests</a>
    </li>
    <li class="divider">
    <li>
      <a href="https://ipums.org/exercises.shtml" class="external-link">Project-specific exercises</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ipums/ipumsr" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forum.ipums.org" class="external-link">
    <span class="fa fa-users"></span>
     
  </a>
</li>
<li>
  <a href="https://www.ipums.org/" class="external-link">
    <span class="fa fa-globe"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define an IPUMS NHGIS extract request</h1>
    <small class="dont-index">Source: <a href="https://github.com/ipums/ipumsr/blob/HEAD/R/api_define_extract.R" class="external-link"><code>R/api_define_extract.R</code></a></small>
    <div class="hidden name"><code>define_extract_nhgis.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Define the parameters of an IPUMS NHGIS extract request to be submitted via
the IPUMS API.</p>
<p>Use <code><a href="get_metadata_nhgis.html">get_metadata_nhgis()</a></code> to browse and identify data sources for use
in NHGIS extract definitions. For general information, see the NHGIS
<a href="https://www.nhgis.org/data-availability" class="external-link">data source overview</a> and the
<a href="https://www.nhgis.org/frequently-asked-questions-faq" class="external-link">FAQ</a>.</p>
<p>Learn more about the IPUMS API in <code><a href="../articles/ipums-api.html">vignette("ipums-api")</a></code> and
NHGIS extract definitions in <code><a href="../articles/ipums-api-nhgis.html">vignette("ipums-api-nhgis")</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">define_extract_nhgis</span><span class="op">(</span></span>
<span>  description <span class="op">=</span> <span class="st">""</span>,</span>
<span>  datasets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_series_tables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  shapefiles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geographic_extents <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  breakdown_and_data_type_layout <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tst_layout <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_format <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>description</dt>
<dd><p>Description of the extract.</p></dd>


<dt>datasets</dt>
<dd><p>List of dataset specifications for any
<a href="https://www.nhgis.org/overview-nhgis-datasets" class="external-link">datasets</a>
to include in the extract request. Use <code><a href="ds_spec.html">ds_spec()</a></code> to create a
<code>ds_spec</code> object containing a dataset specification. See examples.</p></dd>


<dt>time_series_tables</dt>
<dd><p>List of time series table specifications for any
<a href="https://www.nhgis.org/time-series-tables" class="external-link">time series tables</a>
to include in the extract request. Use <code><a href="ds_spec.html">tst_spec()</a></code> to create a
<code>tst_spec</code> object containing a time series table specification. See
examples.</p></dd>


<dt>shapefiles</dt>
<dd><p>Names of any <a href="https://www.nhgis.org/gis-files" class="external-link">shapefiles</a>
to include in the extract request.</p></dd>


<dt>geographic_extents</dt>
<dd><p>Vector of geographic extents to use for
all of the <code>datasets</code> in the extract definition (for instance, to obtain
data within a particular state). Use <code>"*"</code> to select all available extents.</p>
<p>Required when any of the <code>datasets</code> included in the extract definition
include <code>geog_levels</code> that require extent selection. See
<code><a href="get_metadata_nhgis.html">get_metadata_nhgis()</a></code> to determine if a geographic level requires extent
selection. At the time of writing, NHGIS supports extent selection only
for blocks and block groups.</p></dd>


<dt>breakdown_and_data_type_layout</dt>
<dd><p>The desired layout
of any <code>datasets</code> that have multiple data types or breakdown values.</p><ul><li><p><code>"single_file"</code> (default) keeps all data types and breakdown values in
one file</p></li>
<li><p><code>"separate_files"</code> splits each data type or breakdown value into its
own file</p></li>
</ul><p>Required if any <code>datasets</code> included in the extract definition consist of
multiple data types (for instance, estimates and margins of error) or have
multiple breakdown values specified. See <code><a href="get_metadata_nhgis.html">get_metadata_nhgis()</a></code> to
determine whether a requested dataset has multiple data types.</p></dd>


<dt>tst_layout</dt>
<dd><p>The desired layout of all <code>time_series_tables</code> included in
the extract definition.</p><ul><li><p><code>"time_by_column_layout"</code> (wide format, default): rows correspond to
geographic units, columns correspond to different times in the time
series</p></li>
<li><p><code>"time_by_row_layout"</code> (long format): rows correspond to a single
geographic unit at a single point in time</p></li>
<li><p><code>"time_by_file_layout"</code>: data for different times are provided in
separate files</p></li>
</ul><p>Required when an extract definition includes any <code>time_series_tables</code>.</p></dd>


<dt>data_format</dt>
<dd><p>The desired format of the extract data file.</p><ul><li><p><code>"csv_no_header"</code> (default) includes only a minimal header in the first
row</p></li>
<li><p><code>"csv_header"</code> includes a second, more descriptive header row.</p></li>
<li><p><code>"fixed_width"</code> provides data in a fixed width format</p></li>
</ul><p>Note that by default, <code><a href="read_nhgis.html">read_nhgis()</a></code> removes the additional header row in
<code>"csv_header"</code> files.</p>
<p>Required when an extract definition includes any <code>datasets</code> or
<code>time_series_tables</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class <code><a href="ipums_extract-class.html">nhgis_extract</a></code> containing
the extract definition.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>An NHGIS extract definition must include at least one dataset, time series
table, or shapefile specification.</p>
<p>Create an NHGIS dataset specification with <code><a href="ds_spec.html">ds_spec()</a></code>. Each dataset
must be associated with a selection of <code>data_tables</code> and <code>geog_levels</code>. Some
datasets also support the selection of <code>years</code> and <code>breakdown_values</code>.</p>
<p>Create an NHGIS time series table specification with <code><a href="ds_spec.html">tst_spec()</a></code>. Each time
series table must be associated with a selection of <code>geog_levels</code> and
may optionally be associated with a selection of <code>years</code>.</p>
<p>See examples or <code><a href="../articles/ipums-api-nhgis.html">vignette("ipums-api-nhgis")</a></code> for more details about
specifying datasets and time series tables in an NHGIS extract definition.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="get_metadata_nhgis.html">get_metadata_nhgis()</a></code> to find data to include in an extract definition.</p>
<p><code><a href="submit_extract.html">submit_extract()</a></code> to submit an extract request for processing.</p>
<p><code><a href="save_extract_as_json.html">save_extract_as_json()</a></code> and <code><a href="save_extract_as_json.html">define_extract_from_json()</a></code> to share an
extract definition.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Extract definition for tables from an NHGIS dataset</span></span></span>
<span class="r-in"><span><span class="co"># Use `ds_spec()` to create an NHGIS dataset specification</span></span></span>
<span class="r-in"><span><span class="va">nhgis_extract</span> <span class="op">&lt;-</span> <span class="fu">define_extract_nhgis</span><span class="op">(</span></span></span>
<span class="r-in"><span>  description <span class="op">=</span> <span class="st">"Example NHGIS extract"</span>,</span></span>
<span class="r-in"><span>  datasets <span class="op">=</span> <span class="fu"><a href="ds_spec.html">ds_spec</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"1990_STF3"</span>,</span></span>
<span class="r-in"><span>    data_tables <span class="op">=</span> <span class="st">"NP57"</span>,</span></span>
<span class="r-in"><span>    geog_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"county"</span>, <span class="st">"tract"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nhgis_extract</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Example NHGIS extract</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>1990_STF3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>NP57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>county, tract</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use `tst_spec()` to create an NHGIS time series table specification</span></span></span>
<span class="r-in"><span><span class="fu">define_extract_nhgis</span><span class="op">(</span></span></span>
<span class="r-in"><span>  description <span class="op">=</span> <span class="st">"Example NHGIS extract"</span>,</span></span>
<span class="r-in"><span>  time_series_tables <span class="op">=</span> <span class="fu"><a href="ds_spec.html">tst_spec</a></span><span class="op">(</span><span class="st">"CL8"</span>, geog_levels <span class="op">=</span> <span class="st">"county"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  tst_layout <span class="op">=</span> <span class="st">"time_by_row_layout"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Example NHGIS extract</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00; font-weight: bold;">Time Series Table: </span>CL8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>county</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To request multiple datasets, provide a list of `ds_spec` objects</span></span></span>
<span class="r-in"><span><span class="fu">define_extract_nhgis</span><span class="op">(</span></span></span>
<span class="r-in"><span>  description <span class="op">=</span> <span class="st">"Extract definition with multiple datasets"</span>,</span></span>
<span class="r-in"><span>  datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="ds_spec.html">ds_spec</a></span><span class="op">(</span><span class="st">"2014_2018_ACS5a"</span>, <span class="st">"B01001"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state"</span>, <span class="st">"county"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="ds_spec.html">ds_spec</a></span><span class="op">(</span><span class="st">"2015_2019_ACS5a"</span>, <span class="st">"B01001"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state"</span>, <span class="st">"county"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Extract definition with multiple datasets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>2014_2018_ACS5a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>B01001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state, county</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>2015_2019_ACS5a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>B01001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state, county</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If you need to specify the same table or geographic level for</span></span></span>
<span class="r-in"><span><span class="co"># many datasets, you may want to make a set of datasets before defining</span></span></span>
<span class="r-in"><span><span class="co"># your extract request:</span></span></span>
<span class="r-in"><span><span class="va">dataset_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2014_2018_ACS5a"</span>, <span class="st">"2015_2019_ACS5a"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dataset_spec</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">dataset_names</span>,</span></span>
<span class="r-in"><span>  <span class="op">~</span> <span class="fu"><a href="ds_spec.html">ds_spec</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">.x</span>,</span></span>
<span class="r-in"><span>    data_tables <span class="op">=</span> <span class="st">"B01001"</span>,</span></span>
<span class="r-in"><span>    geog_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state"</span>, <span class="st">"county"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">define_extract_nhgis</span><span class="op">(</span></span></span>
<span class="r-in"><span>  description <span class="op">=</span> <span class="st">"Extract definition with multiple datasets"</span>,</span></span>
<span class="r-in"><span>  datasets <span class="op">=</span> <span class="va">dataset_spec</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Extract definition with multiple datasets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>2014_2018_ACS5a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>B01001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state, county</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>2015_2019_ACS5a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>B01001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state, county</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can request datasets, time series tables, and shapefiles in the same</span></span></span>
<span class="r-in"><span><span class="co"># definition:</span></span></span>
<span class="r-in"><span><span class="fu">define_extract_nhgis</span><span class="op">(</span></span></span>
<span class="r-in"><span>  description <span class="op">=</span> <span class="st">"Extract with datasets and time series tables"</span>,</span></span>
<span class="r-in"><span>  datasets <span class="op">=</span> <span class="fu"><a href="ds_spec.html">ds_spec</a></span><span class="op">(</span><span class="st">"1990_STF1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NP1"</span>, <span class="st">"NP2"</span><span class="op">)</span>, <span class="st">"county"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  time_series_tables <span class="op">=</span> <span class="fu"><a href="ds_spec.html">tst_spec</a></span><span class="op">(</span><span class="st">"CL6"</span>, <span class="st">"state"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  shapefiles <span class="op">=</span> <span class="st">"us_county_1990_tl2008"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unsubmitted IPUMS NHGIS extract </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Description: Extract with datasets and time series tables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">Dataset: </span>1990_STF1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Tables: </span>NP1, NP2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>county</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00; font-weight: bold;">Time Series Table: </span>CL6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Geog Levels: </span>state</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00; font-weight: bold;">Shapefiles: </span>us_county_1990_tl2008</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract specifications can be indexed by name</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">nhgis_extract</span><span class="op">$</span><span class="va">datasets</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1990_STF3"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nhgis_extract</span><span class="op">$</span><span class="va">datasets</span><span class="op">[[</span><span class="st">"1990_STF3"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1990_STF3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $data_tables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NP57"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $geog_levels</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "county" "tract" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ds_spec"    "ipums_spec" "list"      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Use the extract definition to submit an extract request to the API</span></span></span>
<span class="r-in"><span><span class="fu"><a href="submit_extract.html">submit_extract</a></span><span class="op">(</span><span class="va">nhgis_extract</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.ipums.org" class="external-link">IPUMS</a> at the University of Minnesota.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> .</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '4ffa912ace97d2493f6ed39f20e94316',
    indexName: 'ipumsr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

