% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api_process_extract.R
\name{submit_extract}
\alias{submit_extract}
\alias{resubmit_extract}
\title{Submit an extract request via the IPUMS API}
\usage{
submit_extract(extract, api_key = Sys.getenv("IPUMS_API_KEY"))

resubmit_extract(extract, api_key = Sys.getenv("IPUMS_API_KEY"))
}
\arguments{
\item{extract}{For \code{submit_extract()}, an
\code{\link[=ipums_extract-class]{ipums_extract}} object.

For \code{resubmit_extract()}, one of:
\itemize{
\item The data collection and extract number formatted as a string of the
form \code{"collection:number"} or as a vector of the form
\code{c("collection", number)}
\item An extract number to be associated with your default IPUMS
collection. See \code{\link[=set_ipums_default_collection]{set_ipums_default_collection()}}
}}

\item{api_key}{API key associated with your user account. Defaults to the
value of the \code{IPUMS_API_KEY} environment variable. See
\code{\link[=set_ipums_api_key]{set_ipums_api_key()}}.}
}
\value{
An \code{\link[=ipums_extract-class]{ipums_extract}} object containing the
extract definition and newly-assigned extract number of the submitted
extract.
}
\description{
Submit an extract request via the IPUMS API and return an \code{\link{ipums_extract}}
object containing the extract definition with a newly-assigned extract
request number.

\code{resubmit_extract()} is a simple wrapper of \code{\link[=get_extract_info]{get_extract_info()}} and
\code{submit_extract()} that supports the resubmission of previous extract
definitions. This can be useful for expired extracts whose data have been
removed from the IPUMS servers.

Note that a resubmitted extract request is treated as a new
submission and will receive a new extract request number, even if the extract
definition is the same.

Learn more about the IPUMS API in \code{vignette("ipums-api")}.
}
\examples{
my_extract <- define_extract_usa(
  description = "2013-2014 ACS Data",
  samples = c("us2013a", "us2014a"),
  variables = c("SEX", "AGE", "YEAR")
)

\dontrun{
# Store your submitted extract request to obtain the extract number
submitted_extract <- submit_extract(my_extract)

submitted_extract$number

# This is useful for checking the extract request status
get_extract_info(submitted_extract)

# You can always get the latest status, even if you forget to store the
# submitted extract request object
submitted_extract <- get_last_extract_info("usa")

# You can also check if submitted extract is ready
is_extract_ready(submitted_extract)

# Or have R check periodically and download when ready
downloadable_extract <- download_extract(submitted_extract, wait = TRUE)

# Use an extract identifier to resubmit a previous (potentially expired)
# extract definition:
resubmit_extract("nhgis:10")
}
}
\seealso{
\code{\link[=download_extract]{download_extract()}} to download an extract.

\code{\link[=get_extract_info]{get_extract_info()}} and \code{\link[=is_extract_ready]{is_extract_ready()}} to check the status of an
extract request.
}
